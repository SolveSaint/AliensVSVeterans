@use "./base.scss";

/* =========================================================
   HARD RULE
   If this file contains any stray characters like "<" at end,
   SCSS compilation can fail or partially apply. File must end clean.
   ========================================================= */

/* =========================================================
   GLOBAL STACKING
   Keep overlays behind content
   ========================================================= */
#quartz-root,
#quartz-body {
  position: relative;
  z-index: 1;
}

/* =========================================================
   PULL THE ENTIRE LAYOUT UP
   Remove the dead space above header image and keep columns aligned
   ========================================================= */
#quartz-root,
#quartz-body,
.center,
.center .page-header,
.center .page-header header {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Banner wrapper has inline margin-bottom, override it */
.center .page-header header > div {
  margin-bottom: 0 !important;
}

/* Pull sidebars up, then add controlled spacing */
.left.sidebar,
.right.sidebar {
  margin-top: 0 !important;
  padding-top: 1rem !important;
}

/* Tighten left title and right block spacing */
.left.sidebar .page-title {
  margin-top: 0 !important;
}

/* Keep columns aligned at the top */
#quartz-body {
  align-items: flex-start !important;
}

/* =========================================================
   SITE TITLE COLOR
   AVSV in the top left
   ========================================================= */
.left.sidebar .page-title,
.left.sidebar .page-title a,
.left.sidebar a.page-title {
  color: #4da6ff !important;
}

.left.sidebar .page-title a:hover,
.left.sidebar a.page-title:hover {
  color: #3dd5d9 !important;
}

/* =========================================================
   STRONG GLOBAL TEXTURED BACKGROUND
   ========================================================= */
body {
  background-color: #0a120e;

  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1400 700' preserveAspectRatio='none'%3E%3Cg fill='rgba(0,0,0,0.88)'%3E%3Cpath d='M0 700 L0 430 L35 345 L70 430 L110 285 L150 450 L195 255 L240 505 L290 295 L345 565 L400 305 L455 605 L510 330 L565 645 L620 345 L675 610 L730 315 L785 575 L840 295 L895 525 L950 275 L1005 485 L1060 265 L1115 455 L1170 285 L1225 435 L1270 335 L1310 420 L1350 360 L1400 430 L1400 700 Z'/%3E%3Cpath d='M0 700 L0 448 L28 380 L55 448 L92 320 L125 468 L165 300 L205 500 L252 320 L300 548 L350 338 L402 586 L452 360 L505 620 L558 372 L612 592 L664 350 L716 564 L768 330 L820 520 L872 310 L924 488 L976 298 L1028 465 L1080 290 L1132 448 L1184 300 L1236 438 L1278 360 L1320 432 L1360 388 L1400 448 L1400 700 Z' opacity='0.92'/%3E%3C/g%3E%3C/svg%3E"),
    linear-gradient(to top, rgba(0,0,0,0.70) 0%, rgba(10,18,14,0.48) 34%, rgba(10,18,14,0.22) 60%, rgba(10,18,14,0) 86%),
    radial-gradient(ellipse at center, rgba(255,255,255,0.055) 0%, rgba(255,255,255,0.028) 35%, rgba(0,0,0,0.36) 70%, rgba(0,0,0,0.64) 100%),
    radial-gradient(rgba(255,255,255,0.07) 1px, transparent 1px),
    radial-gradient(rgba(255,255,255,0.035) 1px, transparent 1px);

  background-size: 1800px 1100px, 100% 1100px, 100% 100%, 5px 5px, 2px 2px;
  background-position: center bottom, center bottom, center, 0 0, 1px 1px;
  background-repeat: repeat-x, no-repeat, no-repeat, repeat, repeat;
  background-attachment: fixed, fixed, fixed, fixed, fixed;
}

/* =========================================================
   HEADER IMAGE SPACING CONTROL
   If you still see a small gap under the header image,
   tighten the first content block below the header.
   ========================================================= */
.center .page-header + .content,
.center .page-header + main,
.center .page-header + div {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* If ContentMeta (date, read time, breadcrumbs) is creating space */
.center .content-meta,
.center .breadcrumb-container,
.center nav[aria-label="Breadcrumb"],
.center .breadcrumbs {
  margin-top: 0.25rem !important;
  padding-top: 0 !important;
}

/* =========================================================
   EXPLORER MENU CHEVRON MARKER
   Adds a chevron before links in the explorer
   ========================================================= */
.left.sidebar .explorer a,
.left.sidebar nav a {
  position: relative;
  padding-left: 1.05rem !important;
}

/* Chevron */
.left.sidebar .explorer a::before,
.left.sidebar nav a::before {
  content: "›";
  position: absolute;
  left: 0;
  top: 0.05rem;
  opacity: 0.55;
}

/* Active / hovered chevron stronger */
.left.sidebar .explorer a:hover::before,
.left.sidebar nav a:hover::before {
  opacity: 0.9;
}

/* =========================================================
   TABLE OF CONTENTS CHEVRON MARKER
   Mirrors explorer chevron behavior inside TOC
   ========================================================= */
.right.sidebar .table-of-contents a,
.right.sidebar .toc a {
  position: relative;
  padding-left: 1.05rem !important;
}

/* Chevron */
.right.sidebar .table-of-contents a::before,
.right.sidebar .toc a::before {
  content: "›";
  position: absolute;
  left: 0;
  top: 0.05rem;

  /* Make sure it is not washed out by TOC text fading */
  opacity: 0.85;
}

/* If your TOC has “faded text” styling, keep chevron readable */
.right.sidebar .table-of-contents,
.right.sidebar .toc {
  --toc-link-opacity: 0.75;
}

.right.sidebar .table-of-contents a,
.right.sidebar .toc a {
  opacity: var(--toc-link-opacity);
}

.right.sidebar .table-of-contents a:hover,
.right.sidebar .toc a:hover {
  opacity: 1;
}

/* =========================================================
   RECENT POSTS BLOCK
   If you render recent posts in-body via component, style it here
   ========================================================= */
.recent-posts-in-body {
  margin: 2rem 0;
  padding: 1.1rem 1.2rem;
  background: rgba(255, 255, 255, 0.035);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 14px;
}

.recent-posts-in-body h2 {
  margin: 0 0 0.65rem 0;
}

.recent-posts-in-body ul {
  margin: 0;
  padding-left: 1.2rem;
}

.recent-posts-in-body li + li {
  margin-top: 0.25rem;
}

/* =========================================================
   FOOTER SOCIAL ICONS
   ========================================================= */
/* Instagram */
footer a[href^="https://www.instagram.com/"] {
  background-image: url("../static/instagram.svg");
}

/* TikTok */
footer a[href*="tiktok.com"] {
  background-image: url("../static/tiktok.svg");
}

/* Discord */
footer a[href*="discord.gg"],
footer a[href*="discord.com"] {
  background-image: url("../static/discord.svg");
}

/* ProtonMail (mailto) */
footer a[href^="mailto:"] {
  background-image: url("../static/protonmail.svg");
}

/* Shared icon behavior */
footer a[href*="instagram.com"],
footer a[href*="tiktok.com"],
footer a[href*="discord"],
footer a[href^="mailto:"] {
  display: inline-block;
  width: 18px;
  height: 18px;
  min-width: 18px;

  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;

  overflow: hidden;
  white-space: nowrap;
  text-indent: 200%;

  filter: invert(1);
  opacity: 0.9;
  vertical-align: middle;

  margin-right: 0.75rem;
}

footer a[href*="instagram.com"]:hover,
footer a[href*="tiktok.com"]:hover,
footer a[href*="discord"]:hover,
footer a[href^="mailto:"]:hover {
  opacity: 1;
}
